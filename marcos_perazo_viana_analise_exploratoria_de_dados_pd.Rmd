---
title: "Análise descritiva e estatística da base dos jogadores ativos da NBA"
author: "Marcos Perazo Viana"
date: "`r format(Sys.time(), '%d %B, %Y')`"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, fig.width = 6.4, fig.height = 4.8)
tinytex::install_tinytex(force = TRUE)
```

```{r importando bibliotecas 1, include = FALSE}
library(tidyverse)
library(tidyr)
library(purrr)
library(dlookr)
library(summarytools)
library(readxl)
library(knitr)
library(data.table)
library(ggpubr)
library(corrplot)
```

```{r importando bibliotecas 2, include = FALSE}
library(rcompanion)
library(stargazer)
library(mice)
library(rmarkdown)
library(tinytex)
library(sandwich)
library(magrittr)
library(shiny)
library(plm)
```

# Introdução

Este projeto utiliza como base de dados informações sobre jogadores ativos da NBA, obtidas no [site oficial da NBA](https://www.nba.com/), na aba *Players*, no dia 22 de março de 2025. Os dados coletados incluem: nomes dos jogadores, equipes em que atuam, posições, altura, peso, data de nascimento, idade, média de pontos, rebotes e assistências por jogo da atual temporada, além de informações sobre o *Draft* e experiência profissional. Adicionalmente, foi criada uma variável indicando o mês de nascimento dos jogadores.
Com esses dados, é possível investigar diversas correlações estatísticas relevantes que ajudam a compreender o desempenho e as características dos atletas. Por exemplo, pode-se analisar a relação entre altura dos jogadores e a média de rebotes por jogo. Partindo da hipótese de que jogadores mais altos possuem vantagem nesse quesito, essa análise busca confirmar ou refutar tal tendência.
Outras correlações potencialmente interessantes incluem:  
- Peso e média de pontos por jogo: Investiga se jogadores com maior massa corporal têm vantagens em marcar pontos, especialmente em posições como pivô.  
- Assistências por jogo e pontos por jogo: Examina a relação entre jogadores que criam oportunidades para seus colegas de equipe e aqueles que executam as finalizações.  
- Altura e assistências por jogo: Avalia se jogadores mais baixos, como armadores, têm maior tendência a contribuir com assistências.
- Média de pontos por jogo e rebotes por jogo: Analisa a relação entre a capacidade de pontuar e pegar rebotes, considerando as diferentes posições em quadra.

Essas análises têm como objetivo explorar padrões e características que podem enriquecer a compreensão sobre o desempenho dos jogadores da NBA.


  ![Site da NBA](Dados_auxiliares/nba.png)

# Carregamento da base.

```{r Carregamento da base de jogadores da NBA, echo=TRUE, message=FALSE, warning=FALSE}
dados_tratados <- read_csv("Dados_auxiliares/dados_apos_coluna_mes.csv", quote = "\"",
                           locale = locale(encoding = "UTF-8"), show_col_types = FALSE)
```


```{r Tratamento dados númericos, echo=FALSE, message=FALSE, warning=FALSE}
dados <- dados_tratados %>%
  mutate(
    PPG = as.numeric(PPG),
    RPG = as.numeric(RPG),
    APG = as.numeric(APG),
  )
```

## Observações iniciais:
1 - Fazendo uma análise preliminar, verificamos que a linha 507 não possui dados em nenhuma das colunas, e foi determinada a eliminação dessa linha.

```{r Eliminação da linha 507, echo=TRUE}
dados <- dados %>% slice(-507)
```

2 - Após verificar as estatisticas individuais dos atletas que receberam NA nas colunas PPG, APG e RPG, verificamos que esses campos deveriam receber valor zero. O que foi realizado.

```{r Atribuir valor zero nos campos PPG, APG e RPG, echo=TRUE}
dados <- dados %>%
  mutate(
    PPG = replace_na(PPG, 0),
    RPG = replace_na(RPG, 0),
    APG = replace_na(APG, 0)
  )
```

Analisar a centralidade dos dados, dipersão, assimetria, bem como suas estatísticas de ordem, a fim de checar se há presença de outliers.

```{r Desc variavel Altura, Peso, Pontos, Rebotes e Assistências, echo=TRUE, message=FALSE, warning=FALSE, error=FALSE}
dados %>% dplyr::select(Altura, Peso, PPG, RPG, APG) %>% 
  summarytools::descr() %>% kable()
```


### Dispersão Altura x Rebotes

```{r Dispersão Altura e Rebotes, include=TRUE, echo=FALSE, message=FALSE, warning=FALSE, fig.width=6.4, fig.height=4.8}
dados %>% 
  ggplot(aes(x = Altura, y = RPG)) +
  geom_point() +
  geom_smooth(method = "lm") +
  labs(title='Gráfico com a dispersão entre Altura e Rebotes por jogo', x='Altura', y='Rebotes por jogo')
```

### Dispersão Pontos x Peso

```{r Dispersão Pontos e Peso, include=TRUE, echo=FALSE, message=FALSE, warning=FALSE, fig.width=6.4, fig.height=4.8}
dados %>% 
  ggplot(aes(x = Peso, y = PPG)) +
  geom_point() +
  geom_smooth(method = "lm") +
  labs(title='Gráfico com a dispersão entre Peso e Pontos por jogo', x='Peso', y='Pontos por jogo')
```

### Dispersão Pontos x Assistências

```{r Dispersão Pontos e Assistências, include=TRUE, echo=FALSE, message=FALSE, warning=FALSE, fig.width=6.4, fig.height=4.8}
dados %>% 
  ggplot(aes(x = PPG, y = APG)) +
  geom_point() +
  geom_smooth(method = "lm") +
  labs(title='Gráfico com a dispersão entre Pontos por jogo e Assistências por jogo', x='Pontos por jogo', y='Assistências por jogo')
```

### Dispersão Pontos x Rebotes

```{r Dispersão Pontos e Rebotes, include=TRUE, echo=FALSE ,message=FALSE, warning=FALSE, fig.width=6.4, fig.height=4.8}
dados %>% 
  ggplot(aes(x = PPG, y = RPG)) +
  geom_point() +
  geom_smooth(method = "lm") +
  labs(title='Gráfico com a dispersão entre Pontos por jogo e Rebotes por jogo', x='Pontos por jogo', y='Rebotes por jogo')
```

### Dispersão Altura x Assistências

```{r Dispersão Altura e Assistências, include=TRUE, echo=FALSE, message=FALSE, warning=FALSE, fig.width=6, fig.height=4, fig.align='center'}
dados %>% 
  ggplot(aes(x = Altura, y = APG)) +
  geom_point() +
  geom_smooth(method = "lm") +
  labs(title='Gráfico com a dispersão entre Altura e Assistências por jogo', x='Altura', y='Assistências por jogo')
```

```{r definindo as funcoes geradoras de binwidths Freedman-Diaconis e Sturge , echo = TRUE}

fd <- function(x) {
  n <-length(x)
  return((2*IQR(x))/n^(1/3))
}

sr <- function(x) {
  n <-length(x)
  return((3.49*sd(x))/n^(1/3))
}
```


```{r Histograma de pontos por jogo com Regra de Freedman-Diaconis, echo=FALSE, fig.width=6, fig.height=4, fig.align='center'}
dados %>% dplyr::select(PPG) %>% ggplot(aes(x=PPG)) +
  geom_histogram(binwidth = fd) + 
  labs(title='Histograma de pontos por jogo',subtitle='Binarização pela Regra de Freedman-Diaconis' ,x='Pontos por jogo', y='Quantidade de jogadores')
```

```{r Histograma de pontos por jogo com Regra de Sturge, echo=FALSE, fig.width=6, fig.height=4, fig.align='center'}
dados %>% dplyr::select(PPG) %>% ggplot(aes(x=PPG)) +
  geom_histogram(binwidth = sr) + 
  labs(title='Histograma de pontos por jogo',subtitle='Binarização pela Regra de Sturge' ,x='Pontos por jogo', y='Quantidade de jogadores')
```

```{r Histograma de assistências por jogo com Regra de Freedman-Diaconis, echo=FALSE, fig.width=6, fig.height=4, fig.align='center'}
dados %>% dplyr::select(APG) %>% ggplot(aes(x=APG)) +
  geom_histogram(binwidth = fd) + 
  labs(title='Histograma de assistências por jogo',subtitle='Binarização pela Regra de Freedman-Diaconis' , x='Assistências por jogo', y='Quantidade de jogadores')
```

```{r Histograma de assistências por jogo com Regra de Sturge, echo=FALSE, fig.width=6, fig.height=4, fig.align='center'}
dados %>% dplyr::select(APG) %>% ggplot(aes(x=APG)) +
  geom_histogram(binwidth = sr) + 
  labs(title='Histograma de assistências por jogo',subtitle='Binarização pela Regra de Sturge' , x='Assistências por jogo', y='Quantidade de jogadores')
```

```{r Histograma de rebotes por jogo com Regra de Freedman-Diaconis, echo=FALSE, fig.width=6, fig.height=4, fig.align='center'}
dados %>% dplyr::select(RPG) %>% ggplot(aes(x=RPG)) +
  geom_histogram(binwidth = fd) + 
  labs(title='Histograma de rebotes por jogo', subtitle='Binarização pela Regra de Freedman-Diaconis' ,x='Pontos por jogo', y='Quantidade de jogadores')
```

```{r Histograma de rebotes por jogo com Regra de Sturge, echo=FALSE, fig.width=6, fig.height=4, fig.align='center'}
dados %>% dplyr::select(RPG) %>% ggplot(aes(x=RPG)) +
  geom_histogram(binwidth = sr) + 
  labs(title='Histograma de rebotes por jogo', subtitle='Binarização pela com Regra de Sturge', x='Pontos por jogo', y='Quantidade de jogadores')
```

```{r Histograma de Altura com Regra de Freedman-Diaconis, echo=FALSE, fig.width=6, fig.height=4, fig.align='center'}
dados %>% dplyr::select(Altura) %>% ggplot(aes(x=Altura)) +
  geom_histogram(binwidth = fd) + 
  labs(title='Histograma de Altura', subtitle='Binarização pela com Regra de Freedman-Diaconis', x='Altura', y='Quantidade de jogadores')
```

```{r Histograma de Altura com Regra de Regra de Sturge, echo=FALSE, fig.width=6, fig.height=4, fig.align='center'}
dados %>% dplyr::select(Altura) %>% ggplot(aes(x=Altura)) +
  geom_histogram(binwidth = sr) + 
  labs(title='Histograma de Altura', subtitle='Binarização pela com Regra de Sturge', x='Altura', y='Quantidade de jogadores')
```

```{r Histograma de Peso com Regra de Freedman-Diaconis, echo=FALSE, warning=FALSE, fig.width=6, fig.height=4, fig.align='center'}
dados %>% dplyr::select(Peso) %>% ggplot(aes(x=Peso)) +
  geom_histogram(binwidth = fd) + 
  labs(title='Histograma de Peso', subtitle='Binarização pela com Regra de Freedman-Diaconis', x='Peso', y='Quantidade de jogadores')
```

```{r Histograma de Peso com Regra de Sturge, echo=FALSE, warning=FALSE, fig.width=6, fig.height=4, fig.align='center'}
dados %>% dplyr::select(Peso) %>% ggplot(aes(x=Peso)) +
  geom_histogram(binwidth = sr) + 
  labs(title='Histograma de Peso', subtitle='Binarização pela com Regra de Sturge', x='Peso', y='Quantidade de jogadores')
```

